(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(39)},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),s=n.n(o),c=(n(21),n(15)),u=n(2),l=function(e){var t=e.persons,n=e.personsService,a=e.setPersons,o=e.setNewMessage,s=e.setType,c=function(e){e.preventDefault();var t=e.target.value;window.confirm("Do you want to delete this record?")&&n.remove(t).then((function(){o("Record has been deleted from the server"),s(!1),setTimeout((function(){o(null)}),5e3)})).then(n.getAll().then((function(e){a(e)}))).catch((function(e){o("Record has already been deleted from the server"),s(!1),setTimeout((function(){o(null)}),5e3),console.log("failed to delete")})),console.log("canceled event")};return r.a.createElement("div",null,r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("li",null," ",e.name,": ",e.number),r.a.createElement("button",{type:"submit",name:e.name,value:e.id,onClick:c},"Delete"))}))))},i=n(3),m=function(e){return r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),e.persons.every((function(t){return t.name.localeCompare(e.newName)}))){var n={name:e.newName,number:e.newNumber};e.setNewName(""),e.setNewNumber(""),e.personsService.create(n).then((function(t){e.setNewMessage("Added ".concat(n.name)),e.setType(!0),setTimeout((function(){e.setNewMessage(null)}),5e3),e.setPersons(e.persons.concat(t))})).catch((function(t){e.setNewMessage("Minimum length for name is 3 and for number 8 digits"),e.setType(!1),console.log(t.response.data)}))}else{if(window.confirm("".concat(e.newName," is already in the phonebook, replace the old number with the new one?"))){var a=e.persons.filter((function(t){return t.name.includes(e.newName)})),r=a[0].id,o=Object(i.a)({},a[0],{number:e.newNumber});e.personsService.update(r,o).then((function(t){e.setNewMessage("Changed ".concat(o.name," number to ").concat(e.newNumber)),e.setType(!0),setTimeout((function(){e.setNewMessage(null)}),5e3),e.setPersons(e.persons.map((function(e){return e.id!==r?e:t})))})).catch((function(t){e.setNewMessage("".concat(o.name," has already been deleted from server")),console.log(t.response.data),e.setType(!1),setTimeout((function(){e.setNewMessage(null)}),5e3)}))}e.setNewName(""),e.setNewNumber("")}}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})),r.a.createElement("div",null,"phone: ",r.a.createElement("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var t=e.persons,n=e.setNewSorted;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{onChange:function(e){var a=e.target.value.toLowerCase();e.preventDefault(),n(t.filter((function(e){return e.name.toLowerCase().includes(a)})))}}))},f=n(4),p=n.n(f),w="/api/persons",b={getAll:function(){return p.a.get(w).then((function(e){return e.data}))},create:function(e){return p.a.post(w,e).then((function(e){return e.data}))},update:function(e,t){return p.a.put("".concat(w,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return p.a.delete("".concat(w,"/").concat(e)).then((function(e){return e.data}))}},h=function(e){var t=e.message,n={background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,align:"center"},a=e.type?Object(i.a)({},n,{color:"green"}):Object(i.a)({},n,{color:"red"});return""===t||null===t?null:r.a.createElement("div",{style:a},t)},v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),f=i[0],p=i[1],w=Object(a.useState)(""),v=Object(u.a)(w,2),g=v[0],N=v[1],E=Object(a.useState)(Object(c.a)(n)),y=Object(u.a)(E,2),j=y[0],O=y[1],S=Object(a.useState)(""),T=Object(u.a)(S,2),k=T[0],M=T[1],C=Object(a.useState)(!0),P=Object(u.a)(C,2),A=P[0],D=P[1];return Object(a.useEffect)((function(){b.getAll().then((function(e){o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(h,{type:A,message:k}),r.a.createElement(d,{persons:n,setNewSorted:O}),r.a.createElement("h2",null,"Add new record"),r.a.createElement(m,{persons:n,setPersons:o,newNumber:g,setNewNumber:N,newName:f,setNewName:p,personsService:b,setNewMessage:M,setType:D}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(l,{persons:j,setType:D,setNewMessage:M,personsService:b,setPersons:o}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.2eee7220.chunk.js.map